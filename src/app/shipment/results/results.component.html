<div class="container results-container">
  <div class="result-topbar">
    <a style="border-right: 1px solid black;" href="/">
      <img class="pt-1" style="width: 30px;" [src]='"/assets/img/back.svg"' alt="dsadsa" />
    </a>
    <h2 class="result-title" >{{ 'shipment.RESULTS_TITLE' | translate }}</h2>

  </div>

  <div *ngIf="filteredShipments.length > 0" class="sub-row" >
    <div> <span style="font-size: 30px;">{{totalResults}} </span> results</div>
    <div class="filter-icon-container">
      <div class="filter-icon" (click)="toggleFilterPopover()">
        <i class="fas fa-filter"></i>
        <img class="filter-tick" [src]='"/assets/img/filter.png"' alt="dsadsa" />
      </div>
      <!-- Filter  -->
      <div class="filter-popover" *ngIf="showFilterPopover">
        <div class="filter-popover-header">
          <span>{{ 'shipment.FILTER_BY_STATUS' | translate }}</span>
          <i class="fas fa-times close-icon" (click)="closeFilterPopover()"></i>
        </div>

        <ul>
          <li *ngFor="let status of availableStatuses">
            <input type="checkbox" [checked]="temporaryStatuses.includes(status)" (click)="toggleStatus(status)">
            <label>{{ status }}</label>
          </li>
        </ul>

        <div class="filter-popover-footer">
          <button class="btn btn-secondary" (click)="resetStatusFilter()">{{ 'shipment.RESET_FILTER' | translate }}</button>
          <button class="btn btn-primary" (click)="applyStatusFilter()">{{ 'shipment.APPLY_FILTER' | translate }}</button>
        </div>
      </div>
    </div>
  </div>

   <div>
     <div *ngFor="let shipment of filteredShipments">
       <div class="row border-bottom mt-3 p-3 result-row">
         <div class="col-xl-4 col-6">
           <p>{{ shipment.OrderNo }}</p>
           <p>{{ shipment.ShipmentLines.TotalNumberOfRecords }} products</p>
           <p><strong>Carrier:</strong> {{ shipment.ScacAndService }}</p>
           <p  class="clickable" (click)="viewDetails(shipment.ShipmentNo)"><strong>Shipment #:</strong> <span>{{ shipment.ShipmentNo }}</span> </p>
         </div>
         
         <div class="col-xl-4 col-6">
           <p class="status">{{ shipment.Status }}</p>
           <p><strong>Assigned to:</strong> {{ shipment.AssignedToUserId }}</p>
           <p><strong>{{ shipment.DeliveryMethod == "SHP" ? "Expected Shipment date" : "Expected Pickup date"}}</strong> {{parseDate(shipment.ExpectedShipmentDate) || shipment.ExpectedShipmentDate}}</p>
         </div>
         
         <div class="col-xl-4 col-12">
           <p><strong> Customer Info:</strong></p>
           <p>{{ shipment.BillToAddress.FirstName }} {{ shipment.BillToAddress.LastName }}</p>
           <p> {{ shipment.BillToAddress.DayPhone }}</p>
           <p>{{ shipment.BillToAddress.EMailID }}</p>
         </div>
       </div>
     </div>
   </div>

   <div *ngIf="filteredShipments.length === 0">
    {{ 'shipment.NO_RESULT' | translate }}
   </div>

  <div *ngIf="isLoading">
    <p>{{ 'shipment.LOADING_MORE' | translate }}</p>
  </div>
</div>
